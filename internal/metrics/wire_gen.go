// Code generated by Wire. DO NOT EDIT.

//go:generate wire
//+build !wireinject

package metrics

import (
	"github.com/nsqio/go-nsq"
	"github.com/inflion/inflion/internal/store"
	"github.com/inflion/inflion/internal/timescale"
)

import (
	_ "github.com/lib/pq"
)

// Injectors from wire.go:

func Initialize() (metrics, error) {
	dbtx, err := store.NewDbtx()
	if err != nil {
		return metrics{}, err
	}
	queries := store.New(dbtx)
	config := nsq.NewConfig()
	metricsProducer := newProducer(config)
	metricsCollector := newCollector(queries, metricsProducer)
	timescaleDBTX, err := timescale.NewDbtx()
	if err != nil {
		return metrics{}, err
	}
	timescaleQueries := timescale.New(timescaleDBTX)
	metricsConsumer := newConsumer(timescaleQueries)
	metricsMetrics := newMetrics(metricsCollector, metricsConsumer)
	return metricsMetrics, nil
}
