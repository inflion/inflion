- args:
    actions:
    - definition:
        arguments:
        - name: input
          type: ConfirmInvitationInput!
        forward_client_headers: true
        handler: http://api:8080/project/invitation/confirm
        kind: synchronous
        output_type: ConfirmInvitationOutput!
      name: confirmInvitation
      permissions:
      - role: user
    custom_types:
      input_objects:
      - fields:
        - name: token
          type: String!
        name: ConfirmInvitationInput
      objects:
      - fields:
        - name: __typename
          type: String!
        - name: result
          type: Boolean!
        name: ConfirmInvitationOutput
    remote_schemas:
    - definition:
        forward_client_headers: true
        timeout_seconds: 60
        url: http://api:8080/graphql
      name: api
    - definition:
        headers:
        - name: x-hasura-admin-secret
          value: inflion
        timeout_seconds: 60
        url: http://hasurats:8080/v1/graphql
      name: timescale
    tables:
    - delete_permissions:
      - permission:
          filter:
            project:
              project_collaborators:
                user_id:
                  _eq: X-Hasura-User-Id
        role: user
      insert_permissions:
      - permission:
          check: {}
          columns:
          - body
          - id
          - name
          - project_id
          set:
            user_id: x-hasura-User-Id
        role: user
      object_relationships:
      - name: project
        using:
          foreign_key_constraint_on: project_id
      select_permissions:
      - permission:
          columns:
          - body
          - id
          - name
          - project_id
          filter:
            project:
              project_collaborators:
                user_id:
                  _eq: X-Hasura-User-Id
        role: user
      table:
        name: action
        schema: public
      update_permissions:
      - permission:
          check: null
          columns:
          - body
          - name
          filter:
            project:
              project_collaborators:
                user_id:
                  _eq: X-Hasura-User-Id
        role: user
    - delete_permissions:
      - permission:
          filter:
            user_id:
              _eq: X-Hasura-User-Id
        role: user
      insert_permissions:
      - permission:
          check: {}
          columns:
          - account_id
          - external_id
          - id
          - project_id
          - role_name
          set:
            user_id: x-hasura-User-Id
        role: user
      object_relationships:
      - name: project
        using:
          foreign_key_constraint_on: project_id
      - name: user_account
        using:
          foreign_key_constraint_on: user_id
      select_permissions:
      - permission:
          columns:
          - account_id
          - created_at
          - external_id
          - id
          - project_id
          - role_name
          - updated_at
          - user_id
          filter:
            project:
              project_collaborators:
                user_id:
                  _eq: X-Hasura-User-Id
        role: user
      table:
        name: aws_account
        schema: public
      update_permissions:
      - permission:
          check: null
          columns:
          - account_id
          - external_id
          - project_id
          - role_name
          - updated_at
          filter:
            user_id:
              _eq: X-Hasura-User-Id
          set:
            user_id: x-hasura-User-Id
        role: user
    - object_relationships:
      - name: project
        using:
          foreign_key_constraint_on: project_id
      select_permissions:
      - permission:
          columns:
          - instance_id
          - name
          - project_id
          filter:
            project:
              project_collaborators:
                user_id:
                  _eq: X-Hasura-User-Id
        role: user
      table:
        name: instance
        schema: public
    - table:
        name: instance_at_service
        schema: public
    - delete_permissions:
      - permission:
          filter:
            project:
              project_collaborators:
                user_id:
                  _eq: X-Hasura-User-Id
        role: user
      insert_permissions:
      - permission:
          check: {}
          columns:
          - id
          - project_id
          - rule_name
          - rules
        role: user
      object_relationships:
      - name: project
        using:
          foreign_key_constraint_on: project_id
      select_permissions:
      - permission:
          columns:
          - created_at
          - id
          - project_id
          - rules
          - rule_name
          - updated_at
          filter:
            project:
              project_collaborators:
                user_id:
                  _eq: X-Hasura-User-Id
        role: user
      table:
        name: notification_rule
        schema: public
      update_permissions:
      - permission:
          check: null
          columns:
          - rule_name
          - rules
          filter:
            project:
              project_collaborators:
                user_id:
                  _eq: X-Hasura-User-Id
        role: user
    - array_relationships:
      - name: project_in_organizations
        using:
          foreign_key_constraint_on:
            column: organization_id
            table:
              name: project_in_organization
              schema: public
      table:
        name: organization
        schema: public
    - array_relationships:
      - name: aws_accounts
        using:
          foreign_key_constraint_on:
            column: project_id
            table:
              name: aws_account
              schema: public
      - name: instances
        using:
          foreign_key_constraint_on:
            column: project_id
            table:
              name: instance
              schema: public
      - name: project_collaborators
        using:
          foreign_key_constraint_on:
            column: project_id
            table:
              name: project_collaborator
              schema: public
      - name: project_in_organizations
        using:
          foreign_key_constraint_on:
            column: project_id
            table:
              name: project_in_organization
              schema: public
      delete_permissions:
      - permission:
          filter:
            user_id:
              _eq: X-Hasura-User-Id
        role: user
      event_triggers:
      - definition:
          enable_manual: false
          insert:
            columns: '*'
        name: project_added
        retry_conf:
          interval_sec: 10
          num_retries: 0
          timeout_sec: 60
        webhook: http://api:8080/project/added
      insert_permissions:
      - permission:
          check: {}
          columns:
          - description
          - name
          - user_id
          set:
            user_id: x-hasura-User-Id
        role: user
      object_relationships:
      - name: user_account
        using:
          foreign_key_constraint_on: user_id
      select_permissions:
      - permission:
          allow_aggregations: true
          columns:
          - id
          - description
          - created_at
          - updated_at
          - name
          - user_id
          filter:
            project_collaborators:
              user_id:
                _eq: X-Hasura-User-Id
        role: user
      table:
        name: project
        schema: public
      update_permissions:
      - permission:
          check: null
          columns:
          - name
          filter:
            project_collaborators:
              user_id:
                _eq: X-Hasura-User-Id
        role: user
    - object_relationships:
      - name: project
        using:
          foreign_key_constraint_on: project_id
      select_permissions:
      - permission:
          columns:
          - project_id
          - user_id
          filter:
            user_id:
              _eq: X-Hasura-User-Id
        role: user
      table:
        name: project_collaborator
        schema: public
    - object_relationships:
      - name: organization
        using:
          foreign_key_constraint_on: organization_id
      - name: project
        using:
          foreign_key_constraint_on: project_id
      table:
        name: project_in_organization
        schema: public
    - event_triggers:
      - definition:
          enable_manual: true
          insert:
            columns: '*'
        name: project_invitation
        retry_conf:
          interval_sec: 10
          num_retries: 3
          timeout_sec: 60
        webhook: http://api:8080/project/invite
      insert_permissions:
      - permission:
          check: {}
          columns:
          - mail_address
          - project_id
          set:
            invitee_user_id: x-hasura-User-Id
        role: user
      object_relationships:
      - name: project
        using:
          foreign_key_constraint_on: project_id
      select_permissions:
      - permission:
          columns:
          - created_at
          - mail_address
          - project_id
          - updated_at
          filter:
            invitee_user_id:
              _eq: X-Hasura-User-Id
        role: user
      table:
        name: project_invitation
        schema: public
    - object_relationships:
      - name: project
        using:
          foreign_key_constraint_on: project_id
      select_permissions:
      - permission:
          columns:
          - created_at
          - id
          - name
          - project_id
          - updated_at
          filter:
            project:
              project_collaborators:
                user_id:
                  _eq: X-Hasura-User-Id
        role: user
      table:
        name: service
        schema: public
    - delete_permissions:
      - permission:
          filter:
            project:
              project_collaborators:
                user_id:
                  _eq: X-Hasura-User-Id
        role: user
      insert_permissions:
      - permission:
          check: {}
          columns:
          - channel
          - id
          - name
          - project_id
          - webhook_url
          set:
            user_id: x-hasura-User-Id
        role: user
      object_relationships:
      - name: project
        using:
          foreign_key_constraint_on: project_id
      select_permissions:
      - permission:
          columns:
          - channel
          - created_at
          - id
          - name
          - project_id
          - updated_at
          - webhook_url
          filter:
            project:
              project_collaborators:
                user_id:
                  _eq: X-Hasura-User-Id
        role: user
      table:
        name: slack_webhook
        schema: public
      update_permissions:
      - permission:
          check: null
          columns:
          - channel
          - name
          - webhook_url
          filter:
            project:
              project_collaborators:
                user_id:
                  _eq: X-Hasura-User-Id
        role: user
    - array_relationships:
      - name: aws_accounts
        using:
          foreign_key_constraint_on:
            column: user_id
            table:
              name: aws_account
              schema: public
      - name: projects
        using:
          foreign_key_constraint_on:
            column: user_id
            table:
              name: project
              schema: public
      select_permissions:
      - permission:
          columns:
          - created_at
          - email
          - id
          - updated_at
          - username
          filter:
            id:
              _eq: X-Hasura-User-Id
        role: user
      table:
        name: user_account
        schema: public
    version: 2
  type: replace_metadata
